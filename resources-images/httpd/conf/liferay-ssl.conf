ServerName ${SERVER_NAME}

#LogLevel alert rewrite:trace8
<VirtualHost ${SERVER_NAME}:443>
#<VirtualHost *:443>

        ServerName ${SERVER_NAME}


        CustomLog /dev/stdout combined
        ErrorLog  /dev/stderr

        SSLEngine on
        SSLCertificateFile   /usr/local/apache2/conf/ssl/certificate.pem 
        SSLCertificateKeyFile /usr/local/apache2/conf/ssl/private.key 
        

        #
        # Cross domain WS call authorization
        #
        RewriteEngine On
        RewriteCond  %{REQUEST_URI}  ^/o/phenix/authentication/infos$
        RewriteCond  %{QUERY_STRING} !=""
        RewriteRule  . - [E=crossdomain:1]

        # Set header
        Header set Access-Control-Allow-Origin "*" ENV=crossdomain

        #
        # Proxy directive to redirect to Liferay
        #
        ProxyRequests Off
        ProxyPreserveHost On

        ProxyPass / https://${LIFERAY_CONTAINER_NAME}:8443/
        ProxyPassReverse / https://${LIFERAY_CONTAINER_NAME}:8443
        #ProxyPass    / http://${LIFERAY_CONTAINER_NAME}:8080/
        #ProxyPassReverse / http://${LIFERAY_CONTAINER_NAME}:8080/



</VirtualHost>
